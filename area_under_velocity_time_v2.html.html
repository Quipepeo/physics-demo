<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Velocity and Displacement Animation</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; text-align: center; }
  h2 { margin-bottom: 18px; }
  .row { display: flex; justify-content: center; gap: 24px; flex-wrap: wrap; margin-bottom: 20px; }
  .panel { display: flex; flex-direction: column; align-items: center; }
  canvas { background: #fafafa; border: 1px solid #ccc; }
  .classLabel { font-weight: bold; font-size: 14px; margin-top: 8px; color: #444; }
  .label { margin-top: 4px; font-weight: bold; }
  .readout { margin-top: 8px; font-size: 14px; color: #333; min-height: 1.2em; }
  button { margin-top: 10px; padding: 8px 16px; font-size: 14px; cursor: pointer; }
</style>
</head>
<body>

<h2>Velocity and Displacement Animation</h2>

<!-- Row 1: Constant velocity -->
<div class="row">
  <div class="panel">
    <canvas id="velOnly" width="520" height="320"></canvas>
    <div class="classLabel">Pierre Marie Curie Physics09 Class</div>
    <div class="label">Plot 1: |v(t)| for v = 5 m/s over 5 s</div>
    <button id="startSecond">Show Displacement Plot</button>
  </div>
  <div class="panel">
    <canvas id="velArea" width="520" height="320"></canvas>
    <div class="classLabel">Pierre Marie Curie Physics09 Class</div>
    <div class="label">Plot 2: Area under |v(t)| is displacement</div>
    <div class="readout" id="dispReadout">Waiting to start...</div>
  </div>
</div>

<!-- Row 2: Accelerated velocity (a = 1 m/s²) -->
<div class="row">
  <div class="panel">
    <canvas id="accelOnly" width="520" height="320"></canvas>
    <div class="classLabel">Pierre Marie Curie Physics09 Class</div>
    <div class="label">Plot 3: v(t) with a = 1 m/s² over 5 s</div>
  </div>
  <div class="panel">
    <canvas id="accelArea" width="520" height="320"></canvas>
    <div class="classLabel">Pierre Marie Curie Physics09 Class</div>
    <div class="label">Plot 4: Displacement as area of triangle under v(t)</div>
    <div class="readout" id="accReadout">Waiting to start...</div>
    <button id="startAccelArea">Show Accelerated Displacement Plot</button>
  </div>
</div>

<script>
/* Shared scales */
const tMax = 5;          // seconds
const yMax = 6;          // velocity axis max (headroom)
const margin = { left: 60, right: 20, top: 20, bottom: 40 };

/* Constant velocity scenario */
const vMag = 5;          // m/s

/* Accelerated scenario */
const aMag = 1;          // m/s^2

/* Canvas refs */
const velOnly = document.getElementById('velOnly');
const velArea = document.getElementById('velArea');
const accelOnly = document.getElementById('accelOnly');
const accelArea = document.getElementById('accelArea');

const ctx1 = velOnly.getContext('2d');
const ctx2 = velArea.getContext('2d');
const ctx3 = accelOnly.getContext('2d');
const ctx4 = accelArea.getContext('2d');

const dispReadout = document.getElementById('dispReadout');
const accReadout = document.getElementById('accReadout');

const startSecondBtn = document.getElementById('startSecond');
const startAccelAreaBtn = document.getElementById('startAccelArea');

/* Helpers */
function drawAxes(ctx, w, h, xLabel = 'Time (s)', yLabel = 'Velocity (m/s)') {
  const x0 = margin.left, y0 = h - margin.bottom;
  const x1 = w - margin.right, y1 = margin.top;
  ctx.clearRect(0, 0, w, h);

  // Axes
  ctx.beginPath();
  ctx.moveTo(x0, y1); ctx.lineTo(x0, y0); ctx.lineTo(x1, y0);
  ctx.strokeStyle = '#000'; ctx.lineWidth = 1.25; ctx.stroke();

  // Labels
  ctx.font = '12px Arial'; ctx.fillStyle = '#000';
  ctx.fillText(yLabel, 10, y1 - 5);
  ctx.fillText(xLabel, x1 - 55, h - 10);

  // Y ticks every 1 m/s
  const yRange = yMax, yPixels = y0 - y1;
  ctx.textAlign = 'right';
  for (let v = 0; v <= yRange; v += 1) {
    const y = y0 - (v / yRange) * yPixels;
    ctx.beginPath(); ctx.moveTo(x0 - 6, y); ctx.lineTo(x0, y); ctx.strokeStyle = '#000'; ctx.stroke();
    ctx.fillText(String(v), x0 - 8, y + 4);
    // grid
    ctx.beginPath(); ctx.moveTo(x0, y); ctx.lineTo(x1, y);
    ctx.strokeStyle = '#eeeeee'; ctx.lineWidth = 1; ctx.stroke();
  }
  ctx.textAlign = 'left';

  // X ticks every 0.5 s
  const xRange = tMax, xPixels = x1 - x0;
  for (let t = 0; t <= xRange + 1e-9; t += 0.5) {
    const x = x0 + (t / xRange) * xPixels;
    ctx.beginPath(); ctx.moveTo(x, y0); ctx.lineTo(x, y0 + 6);
    ctx.strokeStyle = '#000'; ctx.lineWidth = 1.25; ctx.stroke();
    ctx.fillText(String(t), x - 6, y0 + 20);
    // grid
    ctx.beginPath(); ctx.moveTo(x, y0); ctx.lineTo(x, y1);
    ctx.strokeStyle = '#f4f4f4'; ctx.lineWidth = 1; ctx.stroke();
  }

  return { x0, y0, x1, y1, xPixels, yPixels };
}

function vToY(y0, yPixels, v) {
  const clamped = Math.max(0, Math.min(v, yMax));
  return y0 - (clamped / yMax) * yPixels;
}
function tToX(x0, xPixels, t) {
  const clamped = Math.max(0, Math.min(t, tMax));
  return x0 + (clamped / tMax) * xPixels;
}

/* ---------------- Row 1: Constant velocity ---------------- */
// Plot 1: autostart constant velocity line
const start1 = performance.now();
function animateFirst() {
  const now = performance.now();
  const elapsed = (now - start1) / 1000;
  const t = Math.min(elapsed, tMax);
  const v = vMag;
  const f1 = drawAxes(ctx1, velOnly.width, velOnly.height);
  ctx1.beginPath();
  ctx1.moveTo(f1.x0, vToY(f1.y0, f1.yPixels, v));
  ctx1.lineTo(tToX(f1.x0, f1.xPixels, t), vToY(f1.y0, f1.yPixels, v));
  ctx1.strokeStyle = '#1976d2'; ctx1.lineWidth = 3; ctx1.stroke();
  if (elapsed < tMax) requestAnimationFrame(animateFirst);
}
animateFirst();

// Plot 2: button-triggered area shading (rectangle)
function animateSecond() {
  const start2 = performance.now();
  function frame() {
    const now = performance.now();
    const elapsed = (now - start2) / 1000;
    const t = Math.min(elapsed, tMax);
    const v = vMag;
    const f2 = drawAxes(ctx2, velArea.width, velArea.height);

    // Shade rectangle area (displacement = v * t)
    const xLeft = f2.x0;
    const xRight = tToX(f2.x0, f2.xPixels, t);
    const yTop = vToY(f2.y0, f2.yPixels, v);
    const yBase = f2.y0;

    ctx2.beginPath();
    ctx2.moveTo(xLeft, yBase);
    ctx2.lineTo(xRight, yBase);
    ctx2.lineTo(xRight, yTop);
    ctx2.lineTo(xLeft, yTop);
    ctx2.closePath();
    ctx2.fillStyle = 'rgba(255, 179, 0, 0.35)'; // amber
    ctx2.fill();
    ctx2.strokeStyle = 'rgba(255, 179, 0, 0.9)';
    ctx2.lineWidth = 2;
    ctx2.stroke();

    // Velocity line
    ctx2.beginPath();
    ctx2.moveTo(f2.x0, yTop);
    ctx2.lineTo(xRight, yTop);
    ctx2.strokeStyle = '#d32f2f';
    ctx2.lineWidth = 3;
    ctx2.stroke();

    // Readout
    const s = v * t;
    dispReadout.textContent = `t = ${t.toFixed(2)} s, displacement = ${s.toFixed(2)} m`;

    if (elapsed < tMax) {
      requestAnimationFrame(frame);
    } else {
      // Final label
      ctx2.font = 'bold 14px Arial';
      ctx2.fillStyle = '#d32f2f';
      ctx2.fillText(`Pierre Marie Curie Physics09 Class`, f2.x0 + 20, f2.y1 + 20);
      ctx2.fillText(`Total displacement = ${s.toFixed(2)} m`, f2.x0 + 20, f2.y1 + 40);
    }
  }
  frame();
}
startSecondBtn.addEventListener('click', animateSecond);

/* ---------------- Row 2: Accelerated velocity (a = 1 m/s²) ---------------- */
// Plot 3: autostart acceleration line v = a t
const start3 = performance.now();
function animateAccelOnly() {
  const now = performance.now();
  const elapsed = (now - start3) / 1000;
  const t = Math.min(elapsed, tMax);
  const v = aMag * t; // 0 -> 5 m/s over 5 s
  const f3 = drawAxes(ctx3, accelOnly.width, accelOnly.height);

  ctx3.beginPath();
  ctx3.moveTo(f3.x0, vToY(f3.y0, f3.yPixels, 0));
  ctx3.lineTo(tToX(f3.x0, f3.xPixels, t), vToY(f3.y0, f3.yPixels, v));
  ctx3.strokeStyle = '#7b1fa2'; // purple
  ctx3.lineWidth = 3;
  ctx3.stroke();

  if (elapsed < tMax) requestAnimationFrame(animateAccelOnly);
}
animateAccelOnly();

// Plot 4: button-triggered triangle shading (displacement = 1/2 a t^2)
function animateAccelArea() {
  const start4 = performance.now();
  function frame() {
    const now = performance.now();
    const elapsed = (now - start4) / 1000;
    const t = Math.min(elapsed, tMax);
    const v = aMag * t;
    const f4 = drawAxes(ctx4, accelArea.width, accelArea.height);

    // Triangle under the line: (x0,y0) -> (x_t,y0) -> (x_t,y_t)
    const x0 = f4.x0, y0 = f4.y0;
    const x_t = tToX(f4.x0, f4.xPixels, t);
    const y_t = vToY(f4.y0, f4.yPixels, v);

    ctx4.beginPath();
    ctx4.moveTo(x0, y0);
    ctx4.lineTo(x_t, y0);
    ctx4.lineTo(x_t, y_t);
    ctx4.closePath();
    ctx4.fillStyle = 'rgba(33, 150, 243, 0.28)'; // light blue
    ctx4.fill();
    ctx4.strokeStyle = 'rgba(33, 150, 243, 0.9)';
    ctx4.lineWidth = 2;
    ctx4.stroke();

    // Acceleration line v = a t
    ctx4.beginPath();
    ctx4.moveTo(x0, vToY(f4.y0, f4.yPixels, 0));
    ctx4.lineTo(x_t, y_t);
    ctx4.strokeStyle = '#2e7d32'; // green
    ctx4.lineWidth = 3;
    ctx4.stroke();

    // Readout: s = 1/2 a t^2
    const s = 0.5 * aMag * t * t;
    accReadout.textContent = `t = ${t.toFixed(2)} s, v = ${v.toFixed(2)} m/s, displacement = ${s.toFixed(2)} m`;

    if (elapsed < tMax) {
      requestAnimationFrame(frame);
    } else {
      // Final label on the graph
      ctx4.font = 'bold 14px Arial';
      ctx4.fillStyle = '#2e7d32';
      ctx4.fillText(`Pierre Marie Curie Physics09 Class`, f4.x0 + 20, f4.y1 + 20);
      ctx4.fillText(`Total displacement = ${s.toFixed(2)} m`, f4.x0 + 20, f4.y1 + 40);
    }
  }
  frame();
}
startAccelAreaBtn.addEventListener('click', animateAccelArea);
</script>

</body>
</html>
